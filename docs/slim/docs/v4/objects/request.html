<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Request - Slim Framework</title>
        <meta name="description" content="">
        <meta name="robots" content="index, follow">
        <meta property="og:title" content="Request">
        <meta property="og:site_name" content="Slim Framework">
        <meta property="og:url" content="https://www.slimframework.com/docs/v4/objects/request.html">
        <meta property="og:description" content="">
        <meta property="og:type" content="website">
        <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
        <link rel="stylesheet" href="../../../assets/css/all.css">
        <link rel="stylesheet" href="../../../npm/docsearch.js%402/dist/cdn/docsearch.min.css">
        <link rel="shortcut icon" href="../../../assets/images/favicon.png">
        <link rel="stylesheet" href="../../../font-awesome/4.7.0/css/font-awesome.min.css">
        <link href="../../../css?family=Lato:400,700" rel="stylesheet">
        <script src="../../../yjz4fyo.js"></script>
        <script>try{Typekit.load();}catch(e){}</script>
        <script>
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-19430723-1']);
            _gaq.push(['_trackPageview']);
            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </head>
    <body>
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-logo" href="/">Slim</a>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li><a href="/blog">Blog</a></li>
                        <li class="active"><a href="/docs/v4">User Guide</a></li>
                        <li><a href="https://discourse.slimframework.com/">Support</a></li>
                        <li><a href="/contribute">Contribute</a></li>
                    </ul>
                    
                        
                        
                            
                        
                            
                        
                            
                                <div class="navbar-documentation-version-badge">
                                    <span>v4 Documentation</span>
                                </div>
                        
                        
                    
                </div>
            </div>
        </nav>

<div class="wrapper docs">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3">
                <div class="toc-nav-toggle">
                    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#tocNav" aria-expanded="false" aria-controls="tocNav">
                        Toggle Navigation
                    </button>
                </div>
                <div class="collapse toc-nav-collapse" id="tocNav">
                    <h3 class="toc-title" style="margin-top:0">Slim Version</h3>
<div style="border:1px solid #CCC;border-radius:16px;box-sizing:border-box;margin:0 0 30px;padding:0 8px;width:200px;-webkit-appearance:none">
    <select onchange="this.options[this.selectedIndex].value && (window.location = this.options[this.selectedIndex].value);" style="border:0;border-radius:16px;height:32px;margin:0;outline:none;padding:0;width:100%">
        
        
            
            
            <option value="/docs/v2">v2</option>
        
            
            
            <option value="/docs/v3">v3</option>
        
            
            
            <option value="/docs/v4" selected="">v4</option>
        
    </select>
</div>

                    <h3 class="toc-title">Search</h3>
<div class="svg-icons" style="height: 0; width: 0; position: absolute; visibility: hidden">
    <svg xmlns="http://www.w3.org/2000/svg">
        <symbol id="sbx-icon-clear-3" viewbox="0 0 40 40"><path d="M16.228 20L1.886 5.657 0 3.772 3.772 0l1.885 1.886L20 16.228 34.343 1.886 36.228 0 40 3.772l-1.886 1.885L23.772 20l14.342 14.343L40 36.228 36.228 40l-1.885-1.886L20 23.772 5.657 38.114 3.772 40 0 36.228l1.886-1.885L16.228 20z" fill-rule="evenodd"></path></symbol>
        <symbol id="sbx-icon-search-13" viewbox="0 0 40 40"><path d="M26.806 29.012a16.312 16.312 0 0 1-10.427 3.746C7.332 32.758 0 25.425 0 16.378 0 7.334 7.333 0 16.38 0c9.045 0 16.378 7.333 16.378 16.38 0 3.96-1.406 7.593-3.746 10.426L39.547 37.34c.607.608.61 1.59-.004 2.203a1.56 1.56 0 0 1-2.202.004L26.807 29.012zm-10.427.627c7.322 0 13.26-5.938 13.26-13.26 0-7.324-5.938-13.26-13.26-13.26-7.324 0-13.26 5.936-13.26 13.26 0 7.322 5.936 13.26 13.26 13.26z" fill-rule="evenodd"></path></symbol>
    </svg>
</div>
<form novalidate="novalidate" onsubmit="return false;" class="searchbox" style="visibility:hidden;height:0;margin-bottom:30px">
    <div role="search" class="searchbox__wrapper">
        <input id="docsearch" type="search" name="search" placeholder="Search in the doc" autocomplete="off" required="required" class="searchbox__input">
        <button type="submit" title="Submit your search query." class="searchbox__submit">
            <svg role="img" aria-label="Search">
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#sbx-icon-search-13"></use>
            </svg>
        </button>
        <button type="reset" title="Clear the search query." class="searchbox__reset hide">
            <svg role="img" aria-label="Reset">
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#sbx-icon-clear-3"></use>
            </svg>
        </button>
    </div>
</form>
                    
                        
                        
                        <h3 class="toc-title">Get Started</h3>
                        <ul class="toc-links">
                            
                                
                                <li><a href="../index.htm">Home</a></li>
                            
                                
                                <li><a href="../start/installation.html">Installation</a></li>
                            
                                
                                <li><a href="../start/web-servers.html">Web Servers</a></li>
                            
                                
                                <li><a href="../deployment/deployment.html">Deployment</a></li>
                            
                                
                                <li><a href="../start/upgrade.html">Upgrade Guide</a></li>
                            
                        </ul>
                    
                        
                        
                        <h3 class="toc-title">Concepts</h3>
                        <ul class="toc-links">
                            
                                
                                <li><a href="../concepts/life-cycle.html">Application Life Cycle</a></li>
                            
                                
                                <li><a href="../concepts/value-objects.html">PSR-7</a></li>
                            
                                
                                <li><a href="../concepts/middleware.html">Middleware</a></li>
                            
                                
                                <li><a href="../concepts/di.html">Dependency Container</a></li>
                            
                        </ul>
                    
                        
                        
                        <h3 class="toc-title">The Application</h3>
                        <ul class="toc-links">
                            
                                
                                <li><a href="application.html">Overview</a></li>
                            
                                
                                <li><a href="application.html#advanced-notices-and-warnings-handling">Notices & Warnings Handling</a></li>
                            
                        </ul>
                    
                        
                        
                        <h3 class="toc-title active">The Request</h3>
                        <ul class="toc-links">
                            
                                
                                <li><a href="request.html">Overview</a></li>
                            
                                
                                <li><a href="request.html#the-request-method">Method</a></li>
                            
                                
                                <li><a href="request.html#the-request-headers">Headers</a></li>
                            
                                
                                <li><a href="request.html#the-request-body">Body</a></li>
                            
                                
                                <li><a href="request.html#uploaded-files">Uploaded Files</a></li>
                            
                                
                                <li><a href="request.html#request-helpers">Helpers</a></li>
                            
                                
                                <li><a href="request.html#route-object">Route object</a></li>
                            
                        </ul>
                    
                        
                        
                        <h3 class="toc-title">The Response</h3>
                        <ul class="toc-links">
                            
                                
                                <li><a href="response.html">Overview</a></li>
                            
                                
                                <li><a href="response.html#the-response-status">Status</a></li>
                            
                                
                                <li><a href="response.html#the-response-headers">Headers</a></li>
                            
                                
                                <li><a href="response.html#the-response-body">Body</a></li>
                            
                                
                                <li><a href="response.html#returning-json">JSON</a></li>
                            
                        </ul>
                    
                        
                        
                        <h3 class="toc-title">Routing</h3>
                        <ul class="toc-links">
                            
                                
                                <li><a href="routing.html">Overview</a></li>
                            
                                
                                <li><a href="routing.html#how-to-create-routes">Create Routes</a></li>
                            
                                
                                <li><a href="routing.html#route-callbacks">Callbacks</a></li>
                            
                                
                                <li><a href="routing.html#route-strategies">Strategies</a></li>
                            
                                
                                <li><a href="routing.html#route-placeholders">Placeholders</a></li>
                            
                                
                                <li><a href="routing.html#route-names">Names</a></li>
                            
                                
                                <li><a href="routing.html#route-groups">Groups</a></li>
                            
                                
                                <li><a href="routing.html#route-middleware">Middleware</a></li>
                            
                                
                                <li><a href="routing.html#route-expressions-caching">Caching</a></li>
                            
                                
                                <li><a href="routing.html#container-resolution">Container Resolution</a></li>
                            
                        </ul>
                    
                        
                        
                        <h3 class="toc-title">Packaged Middleware</h3>
                        <ul class="toc-links">
                            
                                
                                <li><a href="../middleware/routing.html">Routing</a></li>
                            
                                
                                <li><a href="../middleware/error-handling.html">Error Handling</a></li>
                            
                                
                                <li><a href="../middleware/method-overriding.html">Method Overriding</a></li>
                            
                                
                                <li><a href="../middleware/output-buffering.html">Output Buffering</a></li>
                            
                                
                                <li><a href="../middleware/body-parsing.html">Body Parsing</a></li>
                            
                                
                                <li><a href="../middleware/content-length.html">Content Length</a></li>
                            
                        </ul>
                    
                        
                        
                        <h3 class="toc-title">Cook book</h3>
                        <ul class="toc-links">
                            
                                
                                <li><a href="../cookbook/route-patterns.html">Trailing / in routes</a></li>
                            
                                
                                <li><a href="../cookbook/retrieving-current-route.html">Retrieving Current Route</a></li>
                            
                                
                                <li><a href="../cookbook/database-doctrine.html">Using Doctrine with Slim</a></li>
                            
                                
                                <li><a href="../cookbook/enable-cors.html">Enabling CORS</a></li>
                            
                                
                                <li><a href="../cookbook/uploading-files.html">Uploading Files using POST forms</a></li>
                            
                        </ul>
                    
                        
                        
                        <h3 class="toc-title">Add Ons</h3>
                        <ul class="toc-links">
                            
                                
                                <li><a href="../features/templates.html">Templates</a></li>
                            
                                
                                <li><a href="../features/twig-view.html">Twig Templates</a></li>
                            
                                
                                <li><a href="../features/php-view.html">PHP Templates</a></li>
                            
                        </ul>
                    
                        
                        
                        <h3 class="toc-title">Contributing</h3>
                        <ul class="toc-links">
                            
                                
                                <li><a href="../contributors/strategy.html">Branching Strategy</a></li>
                            
                                
                                <li><a href="../contributors/guidelines.html">Guidelines</a></li>
                            
                        </ul>
                    

                    <h3 class="toc-title">Professional Support</h3>
                    <ul class="toc-links">
                        <li><a href="https://tidelift.com/subscription/pkg/packagist-slim-slim?utm_source=packagist-slim-slim&utm_medium=referral&utm_campaign=website">Professional support from Tidelift</a></li>
                    </ul>
                </div>
            </div>

            <div class="col-md-8 docs-content">
                <h1 class="page-header">Request</h1>
                <div class="edit-panel" style="margin: 0 0 1em 0;">
                    <a href="https://github.com/slimphp/Slim-Website/tree/gh-pages/docs/v4/objects/request.md" target="_blank" class="btn btn-default btn-sm"><i class="fa fa-github"></i> Edit This Page</a>
                </div>
                <p>Your Slim app’s routes and middleware are given a PSR-7 request object that represents the current HTTP request received by your web server.
The request object implements the <a href="https://www.php-fig.org/psr/psr-7/#321-psrhttpmessageserverrequestinterface">PSR-7 ServerRequestInterface</a> with which you can inspect and manipulate the HTTP request method, headers, and body.</p>

<h2 id="how-to-get-the-request-object">How to get the Request object</h2>

<p>The PSR-7 request object is injected into your Slim application routes as the 
first argument to the route callback like this:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="kn">use</span> <span class="nc">Psr\Http\Message\ResponseInterface</span> <span class="k">as</span> <span class="nc">Response</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Psr\Http\Message\ServerRequestInterface</span> <span class="k">as</span> <span class="nc">Request</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Slim\Factory\AppFactory</span><span class="p">;</span>

<span class="k">require</span> <span class="k">__DIR__</span> <span class="mf">.</span> <span class="s1">'/../vendor/autoload.php'</span><span class="p">;</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="nc">AppFactory</span><span class="o">::</span><span class="nf">create</span><span class="p">();</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/hello'</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="kt">Response</span> <span class="nv">$response</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span><span class="o">-&gt;</span><span class="nf">getBody</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span><span class="s1">'Hello World'</span><span class="p">);</span>
    <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">});</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="nf">run</span><span class="p">();</span>
</code></pre></div></div>

<p>The PSR-7 request object is injected into your Slim application <em>middleware</em> 
as the first argument of the middleware callable like this:</p>

<p>Inject PSR-7 request into application middleware:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="kn">use</span> <span class="nc">Psr\Http\Message\ServerRequestInterface</span> <span class="k">as</span> <span class="nc">Request</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Psr\Http\Server\RequestHandlerInterface</span> <span class="k">as</span> <span class="nc">RequestHandler</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Slim\Factory\AppFactory</span><span class="p">;</span>

<span class="k">require</span> <span class="k">__DIR__</span> <span class="mf">.</span> <span class="s1">'/../vendor/autoload.php'</span><span class="p">;</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="nc">AppFactory</span><span class="o">::</span><span class="nf">create</span><span class="p">();</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="nf">add</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="kt">RequestHandler</span> <span class="nv">$handler</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">return</span> <span class="nv">$handler</span><span class="o">-&gt;</span><span class="nf">handle</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// ...define app routes...</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="nf">run</span><span class="p">();</span>
</code></pre></div></div>

<h2 id="the-request-http-method">The Request HTTP-Method</h2>

<p>Every HTTP request has a method that is typically one of:</p>

<ul>
  <li>GET</li>
  <li>POST</li>
  <li>PUT</li>
  <li>DELETE</li>
  <li>HEAD</li>
  <li>PATCH</li>
  <li>OPTIONS</li>
</ul>

<p>You can inspect the HTTP request’s method with the Request object method 
appropriately named <code class="language-plaintext highlighter-rouge">getMethod()</code>.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$method</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getMethod</span><span class="p">();</span>
</code></pre></div></div>

<p>It is possible to fake or <em>override</em> the HTTP request method. 
This is useful if, for example, you need to mimic a <code class="language-plaintext highlighter-rouge">PUT</code> request using a traditional web browser that only supports <code class="language-plaintext highlighter-rouge">GET</code> or <code class="language-plaintext highlighter-rouge">POST</code> requests.</p>

<p><strong>Note:</strong> To enable request method overriding the <a href="../middleware/method-overriding.html">Method Overriding Middleware</a> must be injected into your application.</p>

<p>There are two ways to override the HTTP request method. 
You can include a <code class="language-plaintext highlighter-rouge">METHOD</code> parameter in a <code class="language-plaintext highlighter-rouge">POST</code> request’s body. 
The HTTP request must use the <code class="language-plaintext highlighter-rouge">application/x-www-form-urlencoded</code> content type.</p>

<p>Override HTTP method with _METHOD parameter:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /path HTTP/1.1
Host: example.com
Content-type: application/x-www-form-urlencoded
Content-length: 22

<span class="nv">data</span><span class="o">=</span>value&amp;_METHOD<span class="o">=</span>PUT
</code></pre></div></div>

<p>You can also override the HTTP request method with a custom <code class="language-plaintext highlighter-rouge">X-Http-Method-Override</code> 
HTTP request header. This works with any HTTP request content type.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /path HTTP/1.1
Host: example.com
Content-type: application/json
Content-length: 16
X-Http-Method-Override: PUT

<span class="o">{</span><span class="s2">"data"</span>:<span class="s2">"value"</span><span class="o">}</span>
</code></pre></div></div>

<h3 id="server-parameters">Server Parameters</h3>

<p>To fetch data related to the incoming request environment, you will need to use <code class="language-plaintext highlighter-rouge">getServerParams()</code>.
For example, to get a single Server Parameter:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$params</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getServerParams</span><span class="p">();</span>
<span class="nv">$authorization</span> <span class="o">=</span> <span class="nv">$params</span><span class="p">[</span><span class="s1">'HTTP_AUTHORIZATION'</span><span class="p">]</span> <span class="o">??</span> <span class="kc">null</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="post-parameters">POST Parameters</h3>

<p>If the request method is <code class="language-plaintext highlighter-rouge">POST</code> and the <code class="language-plaintext highlighter-rouge">Content-Type</code> is either
<code class="language-plaintext highlighter-rouge">application/x-www-form-urlencoded</code> or <code class="language-plaintext highlighter-rouge">multipart/form-data</code>,
you can retrieve all <code class="language-plaintext highlighter-rouge">POST</code> parameters as follows:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get all POST parameters</span>
<span class="nv">$params</span> <span class="o">=</span> <span class="p">(</span><span class="k">array</span><span class="p">)</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getParsedBody</span><span class="p">();</span>

<span class="c1">// Get a single POST parameter</span>
<span class="nv">$foo</span> <span class="o">=</span> <span class="nv">$params</span><span class="p">[</span><span class="s1">'foo'</span><span class="p">];</span>
</code></pre></div></div>

<h2 id="the-request-uri">The Request URI</h2>

<p>Every HTTP request has a URI that identifies the requested application resource. 
The HTTP request URI has several parts:</p>

<ul>
  <li>Scheme (e.g. <code class="language-plaintext highlighter-rouge">http</code> or <code class="language-plaintext highlighter-rouge">https</code>)</li>
  <li>Host (e.g. <code class="language-plaintext highlighter-rouge">example.com</code>)</li>
  <li>Port (e.g. <code class="language-plaintext highlighter-rouge">80</code> or <code class="language-plaintext highlighter-rouge">443</code>)</li>
  <li>Path (e.g. <code class="language-plaintext highlighter-rouge">/users/1</code>)</li>
  <li>Query string (e.g. <code class="language-plaintext highlighter-rouge">sort=created&amp;dir=asc</code>)</li>
</ul>

<p>You can fetch the PSR-7 Request object’s <a href="https://www.php-fig.org/psr/psr-7/#35-psrhttpmessageuriinterface">URI object</a> with its <code class="language-plaintext highlighter-rouge">getUri()</code> method:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$uri</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getUri</span><span class="p">();</span>
</code></pre></div></div>

<p>The PSR-7 Request object’s URI is itself an object that provides the following methods to inspect the HTTP request’s URL parts:</p>

<ul>
  <li>getScheme()</li>
  <li>getAuthority()</li>
  <li>getUserInfo()</li>
  <li>getHost()</li>
  <li>getPort()</li>
  <li>getPath()</li>
  <li>getQuery() <small>(returns the full query string, e.g. <code class="language-plaintext highlighter-rouge">a=1&amp;b=2</code>)</small></li>
  <li>getFragment()</li>
</ul>

<p>You can get the query parameters as an associative array on the Request object using <code class="language-plaintext highlighter-rouge">getQueryParams()</code>.</p>

<h3 id="query-string-parameters">Query String Parameters</h3>

<p>The <code class="language-plaintext highlighter-rouge">getQueryParams()</code> method retrieves all query parameters from the
URI of an HTTP request as an associative array.</p>

<p>If there are no query parameters, it returns an empty array.</p>

<p>Internally, the method uses <a href="https://www.php.net/manual/en/function.parse-str.php">parse_str</a>
to parse the query string into an array.</p>

<p><strong>Usage</strong></p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// URL: https://example.com/search?key1=value1&amp;key2=value2</span>
<span class="nv">$queryParams</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getQueryParams</span><span class="p">();</span>
</code></pre></div></div>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">Array</span>
<span class="p">(</span>
    <span class="p">[</span><span class="n">key1</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">value1</span>
    <span class="p">[</span><span class="n">key2</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">value2</span>
<span class="p">)</span>
</code></pre></div></div>

<p>To read a single value from the query parameters array, you can use the parameter’s name as the key.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Output: value1</span>
<span class="nv">$key1</span> <span class="o">=</span> <span class="nv">$queryParams</span><span class="p">[</span><span class="s1">'key1'</span><span class="p">]</span> <span class="o">??</span> <span class="kc">null</span><span class="p">;</span>

<span class="c1">// Output: value2</span>
<span class="nv">$key2</span> <span class="o">=</span> <span class="nv">$queryParams</span><span class="p">[</span><span class="s1">'key2'</span><span class="p">]</span> <span class="o">??</span> <span class="kc">null</span><span class="p">;</span>

<span class="c1">// Output: null</span>
<span class="nv">$key3</span> <span class="o">=</span> <span class="nv">$queryParams</span><span class="p">[</span><span class="s1">'key3'</span><span class="p">]</span> <span class="o">??</span> <span class="kc">null</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>Note:</strong> <code class="language-plaintext highlighter-rouge">?? null</code> ensures that if the query parameter does
not exist, <code class="language-plaintext highlighter-rouge">null</code> is returned instead of causing a warning.</p>

<h2 id="the-request-headers">The Request Headers</h2>

<p>Every HTTP request has headers. 
These are metadata that describe the HTTP request but are not visible in the request’s body. Slim’s PSR-7 Request object provides several methods to inspect its headers.</p>

<h3 id="get-all-headers">Get All Headers</h3>

<p>You can fetch all HTTP request headers as an associative array with the PSR-7
Request object’s <code class="language-plaintext highlighter-rouge">getHeaders()</code> method. 
The resultant associative array’s keys are the header names and its values are themselves a numeric array of string values for their respective header name.</p>

<figure>
  <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$headers</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getHeaders</span><span class="p">();</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$headers</span> <span class="k">as</span> <span class="nv">$name</span> <span class="o">=&gt;</span> <span class="nv">$values</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$name</span> <span class="mf">.</span> <span class="s2">": "</span> <span class="mf">.</span> <span class="nb">implode</span><span class="p">(</span><span class="s2">", "</span><span class="p">,</span> <span class="nv">$values</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>  </div>
  <figcaption>Figure 5: Fetch and iterate all HTTP request headers as an associative array.</figcaption>
</figure>

<h3 id="get-one-header">Get One Header</h3>

<p>You can get a single header’s value(s) with the PSR-7 Request object’s <code class="language-plaintext highlighter-rouge">getHeader($name)</code> method. 
This returns an array of values for the given header name. 
Remember, <em>a single HTTP header may have more than one value!</em></p>

<p>Get values for a specific HTTP header:</p>
<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$headerValueArray</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getHeader</span><span class="p">(</span><span class="s1">'Accept'</span><span class="p">);</span>
</code></pre></div></div>

<p>You may also fetch a comma-separated string with all values for a given header with the PSR-7 Request object’s <code class="language-plaintext highlighter-rouge">getHeaderLine($name)</code> method. 
Unlike the <code class="language-plaintext highlighter-rouge">getHeader($name)</code> method, this method returns a comma-separated string.</p>

<p>Get single header’s values as comma-separated string:</p>
<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$headerValueString</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getHeaderLine</span><span class="p">(</span><span class="s1">'Accept'</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="detect-header">Detect Header</h3>

<p>You can test for the presence of a header with the PSR-7 Request object’s <code class="language-plaintext highlighter-rouge">hasHeader($name)</code> method.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">hasHeader</span><span class="p">(</span><span class="s1">'Accept'</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// Do something</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="detect-xhr-requests">Detect XHR requests</h3>

<p>You can detect XHR requests by checking if the header <code class="language-plaintext highlighter-rouge">X-Requested-With</code> 
is <code class="language-plaintext highlighter-rouge">XMLHttpRequest</code> using the Request’s <code class="language-plaintext highlighter-rouge">getHeaderLine()</code> method.</p>

<p>Example XHR request:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /path HTTP/1.1
Host: example.com
Content-type: application/x-www-form-urlencoded
Content-length: 7
X-Requested-With: XMLHttpRequest

<span class="nv">foo</span><span class="o">=</span>bar
</code></pre></div></div>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getHeaderLine</span><span class="p">(</span><span class="s1">'X-Requested-With'</span><span class="p">)</span> <span class="o">===</span> <span class="s1">'XMLHttpRequest'</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Do something</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="content-type">Content Type</h3>

<p>You can fetch the HTTP request content type with the Request object’s <code class="language-plaintext highlighter-rouge">getHeaderLine()</code> method.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$contentType</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getHeaderLine</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="content-length">Content Length</h3>

<p>You can fetch the HTTP request content length with the Request object’s <code class="language-plaintext highlighter-rouge">getHeaderLine()</code> method.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$length</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getHeaderLine</span><span class="p">(</span><span class="s1">'Content-Length'</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="the-request-body">The Request Body</h2>

<p>Every HTTP request has a body. 
If you are building a Slim application that consumes JSON or XML data, you can use the PSR-7 Request object’s <code class="language-plaintext highlighter-rouge">getParsedBody()</code> method to parse the HTTP request body into a native PHP format. 
Note that body parsing differs from one PSR-7 implementation to another.</p>

<p>You may need to implement middleware in order to parse the incoming input depending on the PSR-7 implementation you have installed. 
Here is an example for parsing incoming <code class="language-plaintext highlighter-rouge">JSON</code> input:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="kn">use</span> <span class="nc">Psr\Http\Message\ResponseInterface</span> <span class="k">as</span> <span class="nc">Response</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Psr\Http\Message\ServerRequestInterface</span> <span class="k">as</span> <span class="nc">Request</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Psr\Http\Server\MiddlewareInterface</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Psr\Http\Server\RequestHandlerInterface</span> <span class="k">as</span> <span class="nc">RequestHandler</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">JsonBodyParserMiddleware</span> <span class="kd">implements</span> <span class="nc">MiddlewareInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">process</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="kt">RequestHandler</span> <span class="nv">$handler</span><span class="p">):</span> <span class="kt">Response</span>
    <span class="p">{</span>
        <span class="nv">$contentType</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getHeaderLine</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">strstr</span><span class="p">(</span><span class="nv">$contentType</span><span class="p">,</span> <span class="s1">'application/json'</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$contents</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">'php://input'</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">json_last_error</span><span class="p">()</span> <span class="o">===</span> <span class="no">JSON_ERROR_NONE</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$request</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">withParsedBody</span><span class="p">(</span><span class="nv">$contents</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$handler</span><span class="o">-&gt;</span><span class="nf">handle</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Parse HTTP request body into native PHP format:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$parsedBody</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getParsedBody</span><span class="p">();</span>
</code></pre></div></div>

<p>Technically speaking, the PSR-7 Request object represents the HTTP request body as an instance of <code class="language-plaintext highlighter-rouge">Psr\Http\Message\StreamInterface</code>. 
You can get the HTTP request body <code class="language-plaintext highlighter-rouge">StreamInterface</code> instance with the PSR-7 Request object’s <code class="language-plaintext highlighter-rouge">getBody()</code> method. 
The <code class="language-plaintext highlighter-rouge">getBody()</code> method is preferable if the incoming HTTP request size is unknown or too large for available memory.</p>

<p>Get HTTP request body:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$body</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getBody</span><span class="p">();</span>
</code></pre></div></div>

<p>The resultant <code class="language-plaintext highlighter-rouge">Psr\Http\Message\StreamInterface</code> instance provides the following 
methods to read and iterate its underlying PHP <code class="language-plaintext highlighter-rouge">resource</code>.</p>

<ul>
  <li>getSize()</li>
  <li>tell()</li>
  <li>eof()</li>
  <li>isSeekable()</li>
  <li>seek()</li>
  <li>rewind()</li>
  <li>isWritable()</li>
  <li>write($string)</li>
  <li>isReadable()</li>
  <li>read($length)</li>
  <li>getContents()</li>
  <li>getMetadata($key = null)</li>
</ul>

<h2 id="uploaded-files">Uploaded Files</h2>

<p>The file uploads in <code class="language-plaintext highlighter-rouge">$_FILES</code> are available from the Request object’s <code class="language-plaintext highlighter-rouge">getUploadedFiles()</code> method. 
This returns an array keyed by the name of the <code class="language-plaintext highlighter-rouge">input</code> element.</p>

<p>Get uploaded files:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$files</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getUploadedFiles</span><span class="p">();</span>
</code></pre></div></div>

<p>Each object in the <code class="language-plaintext highlighter-rouge">$files</code> array is an instance of <code class="language-plaintext highlighter-rouge">Psr\Http\Message\UploadedFileInterface</code> 
and supports the following methods:</p>

<ul>
  <li>getStream()</li>
  <li>moveTo($targetPath)</li>
  <li>getSize()</li>
  <li>getError()</li>
  <li>getClientFilename()</li>
  <li>getClientMediaType()</li>
</ul>

<p>See the <a href="../cookbook/uploading-files.html">cookbook</a> on how to upload files using a POST form.</p>

<h2 id="attributes">Attributes</h2>

<p>With PSR-7 it is possible to inject objects/values into the request object for further processing. 
In your applications middleware often need to pass along information to your route closure and the way to do it is to add it to the request object via an attribute.</p>

<p>Example, setting a value on your request object.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="nc">Psr\Http\Message\ServerRequestInterface</span> <span class="k">as</span> <span class="nc">Request</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Psr\Http\Server\RequestHandlerInterface</span> <span class="k">as</span> <span class="nc">RequestHandler</span><span class="p">;</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="nf">add</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="kt">RequestHandler</span> <span class="nv">$handler</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Add the session storage to your request as [READ-ONLY]</span>
    <span class="nv">$request</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">withAttribute</span><span class="p">(</span><span class="s1">'session'</span><span class="p">,</span> <span class="nv">$_SESSION</span><span class="p">);</span>
    
    <span class="k">return</span> <span class="nv">$handler</span><span class="o">-&gt;</span><span class="nf">handle</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Example, how to retrieve the value.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="nc">Psr\Http\Message\ResponseInterface</span> <span class="k">as</span> <span class="nc">Response</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Psr\Http\Message\ServerRequestInterface</span> <span class="k">as</span> <span class="nc">Request</span><span class="p">;</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/test'</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="kt">Response</span> <span class="nv">$response</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Get the session from the request</span>
    <span class="nv">$session</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">getAttribute</span><span class="p">(</span><span class="s1">'session'</span><span class="p">);</span>
    
    <span class="nv">$response</span><span class="o">-&gt;</span><span class="nf">getBody</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">write</span><span class="p">(</span><span class="s1">'Yay, '</span> <span class="mf">.</span> <span class="nv">$session</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]);</span>
    
    <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div></div>

<p>The request object also has bulk functions as well. <code class="language-plaintext highlighter-rouge">$request-&gt;getAttributes()</code> and <code class="language-plaintext highlighter-rouge">$request-&gt;withAttributes()</code></p>


                <nav>
                    <ul class="nav pager">
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                
                                    
                                        <li class="previous">
                                            <a href="application.html" rel="prev"><i class="fa fa-arrow-left"></i> <small>The Application: </small> Overview</a>
                                        </li>
                                    
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                

                                
                                    <li class="next">
                                        <a href="response.html" rel="next"><small>The Response: </small> Overview <i class="fa fa-arrow-right"></i></a>
                                    </li>
                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                
                                  
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                            
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            

                                
                                

                                
                                

                                

                                
                                
                                
                            
                        
                    </ul>
                </nav>
            </div>
        </div>
        <footer class="site-footer">
    <p>
        Created and maintained by <br>
        <a href="http://joshlockhart.com">Josh Lockhart</a>,
        <a href="https://www.donielsmith.com" target="_blank">Andrew Smith</a>,
        <a href="http://akrabat.com/" target="_blank">Rob Allen</a>,
        <a href="http://www.lgse.com/" target="_blank">Pierre Bérubé</a>, and the
        <a href="https://github.com/orgs/slimphp/people" target="_blank">Slim Framework Team</a>
    </p>
    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" style="margin: 0; padding-top: 20px">
        <input type="hidden" name="cmd" value="_s-xclick">
        <input type="hidden" name="hosted_button_id" value="9YRVXHRZT6H3L">
        <input type="image" src="../../../en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
        <img alt="" border="0" src="../../../en_US/i/scr/pixel.gif" width="1" height="1">
    </form>
</footer>

    </div>
</div>
        <script src="../../../ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="../../../bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <script src="../../../assets/scripts/build/production.min.js"></script>
        
        <script src="../../../npm/docsearch.js%402/dist/cdn/docsearch.min.js"></script>
        <script>
          docsearch({
            apiKey: '8ed5262aecf5240c6d66dbba260f3e51',
            appId: 'KS0N5YSBFY',
            indexName: 'slim-docs',
            inputSelector: '#docsearch',
            debug: true,
            transformData: function (suggestions) {
              for (var i = 0; i < suggestions.length; i++) {
                var suggestion = suggestions[i];

                var docVersion = null;
                var urlFragments = suggestion.url.split("/");
                if (urlFragments.length >= 3 && urlFragments[1] === "docs") {
                  docVersion = urlFragments[2];
                }

                if (suggestion.hierarchy.lvl0 === null) {
                  suggestions[i].hierarchy.lvl0 = docVersion ? "Slim " + docVersion + " - " + suggestion.title : suggestion.title
                }
              }
              return suggestions;
            },
          });
        </script>
        
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </body>
</html>

